<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::body})}">
<body>

<h2>Csapatonkénti átlagos helyezés</h2>
<canvas id="chart" width="800" height="400"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    const labels = /*[[${csapatok}]]*/ [];
    const data = /*[[${atlagok}]]*/ [];

    new Chart(document.getElementById("chart"), {
          type: 'bar',
          data: { labels, datasets: [{ label: 'Átlagos helyezés', data }] },
          options: {
            indexAxis: 'y',          // <-- vízszintes oszlopok
            plugins: {
              legend: { display: false },
              title: { display: true, text: 'Forma–1 — Csapatonkénti átlagos helyezések' },
              tooltip: {
                callbacks: {
                  label: (ctx) => `Átlag: ${ctx.parsed.x?.toFixed(2) ?? ctx.parsed.y?.toFixed(2)}`
                }
              }
            },
            scales: {
              x: {
                beginAtZero: true,
                suggestedMax: 25,
                ticks: { stepSize: 1 },
                title: { display: true, text: 'Átlagos helyezés (minél kisebb, annál jobb)' }
              },
              y: { title: { display: true, text: 'Csapatok' } }
            }
          }
        });

    /*]]>*/
</script>

</body>
</html>
